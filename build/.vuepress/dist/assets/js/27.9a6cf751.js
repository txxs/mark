(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{405:function(v,_,t){"use strict";t.r(_);var d=t(13),e=Object(d.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h3",{attrs:{id:"底层-lucene"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#底层-lucene"}},[v._v("#")]),v._v(" 底层 lucene")]),v._v(" "),t("p",[v._v("简单来说，lucene 就是一个 jar 包，里面包含了封装好的各种建立倒排索引的算法代码。我们用 Java 开发的时候，引入 lucene jar，然后基于 lucene 的 api 去开发就可以了。")]),v._v(" "),t("p",[v._v("通过 lucene，我们可以将已有的数据建立索引，lucene 会在本地磁盘上面，给我们组织索引的数据结构。")]),v._v(" "),t("h3",{attrs:{id:"倒排索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#倒排索引"}},[v._v("#")]),v._v(" 倒排索引")]),v._v(" "),t("p",[v._v("在搜索引擎中，每个文档都有一个对应的文档 ID，文档内容被表示为一系列关键词的集合。例如，文档 1 经过分词，提取了 20 个关键词，每个关键词都会记录它在文档中出现的次数和出现位置。")]),v._v(" "),t("p",[v._v("那么，倒排索引就是"),t("strong",[v._v("关键词到文档")]),v._v(" ID 的映射，每个关键词都对应着一系列的文件，这些文件中都出现了关键词。")]),v._v(" "),t("p",[v._v("举个栗子。")]),v._v(" "),t("p",[v._v("有以下文档：")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("DocId")]),v._v(" "),t("th",[v._v("Doc")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("1")]),v._v(" "),t("td",[v._v("谷歌地图之父跳槽 Facebook")])]),v._v(" "),t("tr",[t("td",[v._v("2")]),v._v(" "),t("td",[v._v("谷歌地图之父加盟 Facebook")])]),v._v(" "),t("tr",[t("td",[v._v("3")]),v._v(" "),t("td",[v._v("谷歌地图创始人拉斯离开谷歌加盟 Facebook")])]),v._v(" "),t("tr",[t("td",[v._v("4")]),v._v(" "),t("td",[v._v("谷歌地图之父跳槽 Facebook 与 Wave 项目取消有关")])]),v._v(" "),t("tr",[t("td",[v._v("5")]),v._v(" "),t("td",[v._v("谷歌地图之父拉斯加盟社交网站 Facebook")])])])]),v._v(" "),t("p",[v._v("对文档进行分词之后，得到以下"),t("strong",[v._v("倒排索引")]),v._v("。")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("WordId")]),v._v(" "),t("th",[v._v("Word")]),v._v(" "),t("th",[v._v("DocIds")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("1")]),v._v(" "),t("td",[v._v("谷歌")]),v._v(" "),t("td",[v._v("1,2,3,4,5")])]),v._v(" "),t("tr",[t("td",[v._v("2")]),v._v(" "),t("td",[v._v("地图")]),v._v(" "),t("td",[v._v("1,2,3,4,5")])]),v._v(" "),t("tr",[t("td",[v._v("3")]),v._v(" "),t("td",[v._v("之父")]),v._v(" "),t("td",[v._v("1,2,4,5")])]),v._v(" "),t("tr",[t("td",[v._v("4")]),v._v(" "),t("td",[v._v("跳槽")]),v._v(" "),t("td",[v._v("1,4")])]),v._v(" "),t("tr",[t("td",[v._v("5")]),v._v(" "),t("td",[v._v("Facebook")]),v._v(" "),t("td",[v._v("1,2,3,4,5")])]),v._v(" "),t("tr",[t("td",[v._v("6")]),v._v(" "),t("td",[v._v("加盟")]),v._v(" "),t("td",[v._v("2,3,5")])]),v._v(" "),t("tr",[t("td",[v._v("7")]),v._v(" "),t("td",[v._v("创始人")]),v._v(" "),t("td",[v._v("3")])]),v._v(" "),t("tr",[t("td",[v._v("8")]),v._v(" "),t("td",[v._v("拉斯")]),v._v(" "),t("td",[v._v("3,5")])]),v._v(" "),t("tr",[t("td",[v._v("9")]),v._v(" "),t("td",[v._v("离开")]),v._v(" "),t("td",[v._v("3")])]),v._v(" "),t("tr",[t("td",[v._v("10")]),v._v(" "),t("td",[v._v("与")]),v._v(" "),t("td",[v._v("4")])]),v._v(" "),t("tr",[t("td",[v._v("..")]),v._v(" "),t("td",[v._v("..")]),v._v(" "),t("td",[v._v("..")])])])]),v._v(" "),t("p",[v._v("另外，实用的倒排索引还可以记录更多的信息，比如文档频率信息，表示在文档集合中有多少个文档包含某个单词。")]),v._v(" "),t("p",[v._v("那么，有了倒排索引，搜索引擎可以很方便地响应用户的查询。比如用户输入查询 "),t("code",[v._v("Facebook")]),v._v("，搜索系统查找倒排索引，从中读出包含这个单词的文档，这些文档就是提供给用户的搜索结果。")]),v._v(" "),t("p",[v._v("要注意倒排索引的两个重要细节：")]),v._v(" "),t("ul",[t("li",[v._v("倒排索引中的所有词项对应一个或多个文档；")]),v._v(" "),t("li",[v._v("倒排索引中的词项"),t("strong",[v._v("根据字典顺序升序排列")])])]),v._v(" "),t("blockquote",[t("p",[v._v("上面只是一个简单的栗子，并没有严格按照字典顺序升序排列。")])])])}),[],!1,null,null,null);_.default=e.exports}}]);