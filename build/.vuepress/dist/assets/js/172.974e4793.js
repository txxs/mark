(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{552:function(a,v,n){"use strict";n.r(v);var e=n(13),t=Object(e.a)({},(function(){var a=this,v=a.$createElement,n=a._self._c||v;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h3",{attrs:{id:"jmm讲解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jmm讲解"}},[a._v("#")]),a._v(" JMM讲解")]),a._v(" "),n("p",[a._v("原文地址")]),a._v(" "),n("p",[n("code",[a._v("https://segmentfault.com/a/1190000016085105 https://blog.csdn.net/javazejian/article/details/72772461 https://zhuanlan.zhihu.com/p/29881777")])]),a._v(" "),n("p",[a._v("我们知道，Java程序是需要运行在Java虚拟机上面的，Java内存模型（Java Memory Model ,JMM）就是一种符合内存模型规范的，屏蔽了各种硬件和操作系统的访问差异的，保证了Java程序在各种平台下对内存的访问都能保证效果一致的机制及规范。")]),a._v(" "),n("p",[a._v("Java内存模型规定了所有的变量都存储在主内存中，每条线程还有自己的工作内存，线程的工作内存中保存了该线程中是用到的变量的主内存副本拷贝，线程对变量的所有操作都必须在工作内存中进行，而不能直接读写主内存。不同的线程之间也无法直接访问对方工作内存中的变量，线程间变量的传递均需要自己的工作内存和主存之间进行数据同步进行。")]),a._v(" "),n("p",[a._v("再来总结下，JMM是一种规范，目的是解决由于多线程通过共享内存进行通信时，存在的本地内存数据不一致、编译器会对代码指令重排序、处理器会对代码乱序执行等带来的问题。")]),a._v(" "),n("p",[a._v("了解Java多线程的朋友都知道，在Java中提供了一系列和并发处理相关的关键字，比如volatile、synchronized、final、concurren包等。其实这些就是Java内存模型封装了底层的实现后提供给程序员使用的一些关键字。")]),a._v(" "),n("p",[a._v("1、原子性")]),a._v(" "),n("p",[a._v("在Java中，为了保证原子性，提供了两个高级的字节码指令monitorenter和monitorexit。在synchronized的实现原理文章中，介绍过，这两个字节码，在Java中对应的关键字就是synchronized。因此，在Java中可以使用synchronized来保证方法和代码块内的操作是原子性的。")]),a._v(" "),n("p",[a._v("2、可见性")]),a._v(" "),n("p",[a._v("Java内存模型是通过在变量修改后将新值同步回主内存，在变量读取前从主内存刷新变量值的这种依赖主内存作为传递媒介的方式来实现的。Java中的volatile关键字提供了一个功能，那就是被其修饰的变量在被修改后可以立即同步到主内存，被其修饰的变量在每次是用之前都从主内存刷新。因此，可以使用volatile来保证多线程操作时变量的可见性。除了volatile，Java中的synchronized和final两个关键字也可以实现可见性。只不过实现方式不同，这里不再展开了。")]),a._v(" "),n("p",[a._v("3、有序性")]),a._v(" "),n("p",[a._v("在Java中，可以使用synchronized和volatile来保证多线程之间操作的有序性。实现方式有所区别：volatile关键字会禁止指令重排。synchronized关键字保证同一时刻只允许一条线程操作。好了，这里简单的介绍完了Java并发编程中解决原子性、可见性以及有序性可以使用的关键字。读者可能发现了，好像synchronized关键字是万能的，他可以同时满足以上三种特性，这其实也是很多人滥用synchronized的原因。但是synchronized是比较影响性能的，虽然编译器提供了很多锁优化技术，但是也不建议过度使用。")])])}),[],!1,null,null,null);v.default=t.exports}}]);